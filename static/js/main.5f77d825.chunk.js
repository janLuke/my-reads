(this["webpackJsonpmy-reads"]=this["webpackJsonpmy-reads"]||[]).push([[0],{36:function(e,t,a){e.exports=a.p+"static/media/app-logo.bfc5d976.svg"},40:function(e,t,a){e.exports=a(68)},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),l=a.n(o),c=a(22),i=a(10),s=a(20),u=a.n(s),m=a(23),d=a(13),f=a(17),h=a(19),p=a(18),v=a(15),E=a(3),b=a(2),g=a.n(b),y=a(9),k=a(27),N=(a(46),"https://reactnd-books-api.udacity.com"),O=localStorage.token;O||(O=localStorage.token=Math.random().toString(36).substr(-8));var j={Accept:"application/json",Authorization:O},C=function(e){return fetch("".concat(N,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},S=a(25),D=a(35),B=a(11),I=a(5),R=Object.freeze({READ:"read",READING:"currentlyReading",WANT_TO_READ:"wantToRead",NONE:"none"}),w=function e(t){var a=t.id,n=t.displayName,r=t.icon,o=t.color,l=t.shortDisplayName,c=t.className;Object(d.a)(this,e),this.id=a,this.displayName=n,this.shortDisplayName=l||n,this.icon=r,this.color=o,this.slug=c||this.displayName.toLowerCase().split(" ").join("-")},T=Object.freeze(function(){var e=Object.freeze(new w({id:R.READING,displayName:"Currently reading",shortDisplayName:"Reading",icon:I.c,color:"var(--color-shelf-reading)"})),t=Object.freeze(new w({id:R.WANT_TO_READ,displayName:"Want to read",shortDisplayName:"Wanted",icon:I.d,color:"var(--color-shelf-want-to-read)"})),a=Object.freeze(new w({id:R.READ,displayName:"Read",icon:I.b,color:"var(--color-shelf-read)"})),n=Object.freeze([e,t,a]),r=Object.values(R),o=Object.freeze(Object.fromEntries(n.map((function(e){return[e.id,e]}))));return{READING:e,WANT_TO_READ:t,READ:a,ids:r,inDisplayOrder:n,byID:o}}()),x=Object.freeze(["Android","Art","Artificial Intelligence","Astronomy","Austen","Baseball","Basketball","Bhagat","Biography","Brief","Business","Camus","Cervantes","Christie","Classics","Comics","Cook","Cricket","Cycling","Desai","Design","Development","Digital Marketing","Drama","Drawing","Dumas","Education","Everything","Fantasy","Film","Finance","First","Fitness","Football","Future","Games","Gandhi","Homer","Horror","Hugo","Ibsen","Journey","Kafka","King","Lahiri","Larsson","Learn","Literary Fiction","Make","Manage","Marquez","Money","Mystery","Negotiate","Painting","Philosophy","Photography","Poetry","Production","Programming","React","Redux","River","Robotics","Rowling","Satire","Science Fiction","Shakespeare","Singh","Swimming","Tale","Thrun","Time","Tolstoy","Travel","Ultimate","Virtual Reality","Web Development","iOS"]),P=a(32),A=(a(52),a(24)),L=(Object.keys,Object.values);Object.entries;function M(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n={},r=Object(A.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o[a]]=o}}catch(l){r.e(l)}finally{r.f()}return n}function F(e,t){var a=Object.assign({},t);return delete a[e],a}function Q(e,t){return e.length<=t?e:e.substr(0,t-3)+"..."}function z(e){var t=e.leading,a=e.title,n=e.onClick;return r.a.createElement("div",{className:"MenuItem",onClick:n},r.a.createElement("div",{className:"MenuItem-leading"},t),r.a.createElement("div",{className:"MenuItem-title"},a))}function H(e){var t=e.children;return r.a.createElement("h3",{className:"MenuTitle",onClick:function(e){return e.stopPropagation()}},t)}function W(e){var t=e.className;return r.a.createElement("div",{className:g()("Divider",t)})}function _(e){var t=e.children,a=e.className;return r.a.createElement("div",{className:g()("Menu",a)},t)}function G(e){var t=e.renderMenu,a=e.children,n=e.closeOnMenuClick,o=e.className,l=e.popupClassName,c=r.a.useState(!1),i=Object(S.a)(c,2),s=i[0],u=i[1],m=r.a.useRef(null),d=function(){return u(!1)};!function(e,t){r.a.useEffect((function(){function a(a){e.current&&!e.current.contains(a.target)&&t()}return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}}),[e,t])}(m,d);var f=n?d:null;return r.a.createElement("div",{ref:m,className:g()("MenuTrigger",o)},r.a.createElement("div",{onClick:function(){return u(!s)}},a),s&&r.a.createElement("div",{className:g()("MenuTrigger-popup",l),onClick:f},t()))}G.defaultProps={closeOnMenuClick:!0};a(53);var U=a(16),q=(a(54),r.a.memo((function(e){var t=e.color,a=e.raised,n=e.className,o=e.style,l=e.children,c=e.onClick,i=Object(U.a)(e,["color","raised","className","style","children","onClick"]);return r.a.createElement("button",Object.assign({},i,{className:g()("Button",t,n,{raised:a}),style:o,onClick:c}),l)})));function J(e){var t=e.icon,a=e.raised,n=e.size,o=e.color,l=e.className,c=e.onClick,i=Object(U.a)(e,["icon","raised","size","color","className","onClick"]);return r.a.createElement(q,Object.assign({color:o,raised:a,className:g()("IconButton",l),style:{width:n,height:n},onClick:c},i),r.a.createElement(B.a,{icon:t,fixedWidth:!0}))}function K(e){var t=e.props;return r.a.createElement(J,Object.assign({icon:I.a},t))}function Y(e){var t=e.shelf,a=t.icon,n=t.color;return r.a.createElement(B.a,{icon:a,color:n,fixedWidth:!0})}function V(e){var t=e.book,a=Object(n.useContext)(Re).updateBookShelf,o=T.inDisplayOrder.filter((function(e){return e.id!==t.shelf})).map((function(e){return r.a.createElement(z,{key:e.id,leading:r.a.createElement(Y,{shelf:e}),title:e.displayName,onClick:function(){return a(t,e.id)}})}));return r.a.createElement(_,null,r.a.createElement(H,null,t.shelf?"Move to":"Add to"),o,t.shelf&&r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null),r.a.createElement(z,{key:"remove",leading:r.a.createElement(B.a,{icon:I.i,color:"red",fixedWidth:!0}),title:"Remove",onClick:function(){return a(t,R.NONE)}})))}function X(e){var t=e.book;return r.a.createElement(G,{className:"BookActionMenuTrigger",renderMenu:function(){return r.a.createElement(V,{book:t})}},r.a.createElement(J,{raised:!0,color:"secondary",icon:I.e}))}q.defaultProps={raised:!1};var Z=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"renderRibbon",value:function(e){var t=T.byID[e];return r.a.createElement("div",{className:g()("Book-ribbon",t.slug)},r.a.createElement("span",null,t.shortDisplayName))}},{key:"render",value:function(){var e=this.props,t=e.book,a=e.showShelfRibbon,n=t.imageLinks?r.a.createElement("img",{src:t.imageLinks.thumbnail,alt:'Cover of "'.concat(t.title,'"')}):r.a.createElement("div",{className:"Book-cover-placeholder"},"Cover not available"),o=Q(t.title,75),l="authors"in t?t.authors.join(", "):null,c=l?Q(l,50):null;return r.a.createElement("div",{className:"Book"},r.a.createElement("div",{className:"Book-top"},r.a.createElement("div",{className:"Book-cover"},n,t.shelf&&a&&this.renderRibbon(t.shelf)),r.a.createElement(X,{book:t})),r.a.createElement("div",{className:"Book-title",title:t.title.length>75?t.title:null},o),l&&r.a.createElement("div",{className:"Book-authors",title:l.length>50?l:null},c))}}]),a}(r.a.PureComponent);Z.defaultProps={showShelfRibbon:!1};var $=Z,ee=(a(55),{onAppear:function(e){e.classList.add("book-appear"),setTimeout((function(){e.style.opacity=1,e.classList.remove("book-appear")}),300)},onExit:function(e,t,a){e.classList.add("book-exit"),setTimeout(a,300)}}),te=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.hideEnteringElements,n=t.animateEnteringElements,r=t.animateExitingElements,o=t.animateFlippedElements,e.next=3,Promise.all([a(),r()]);case 3:o(),n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ae(e){var t=e.books,a=e.showShelfRibbon;return r.a.createElement(P.b,{flipKey:t,handleEnterUpdateDelete:te},r.a.createElement("ol",{className:"BookGrid"},t.map((function(e){return r.a.createElement(P.a,Object.assign({key:e.id,flipId:e.id},ee),r.a.createElement("li",{className:"BookGrid-item"},r.a.createElement($,{book:e,showShelfRibbon:a})))}))))}ae.defaultProps={showShelfRibbon:!1};var ne=ae;a(56);var re=function(e){var t=e.type,a=e.illustration,n=e.title,o=e.text;return r.a.createElement("div",{className:g()("PageInfo",t)},a&&r.a.createElement("div",{className:"PageInfo-illustration"},a),r.a.createElement("div",{className:"PageInfo-content"},n&&r.a.createElement("h2",{className:"PageInfo-title"},n),o&&r.a.createElement("p",{className:"PageInfo-text"},o)))},oe=a(36),le=a.n(oe);a(57);function ce(e){var t=e.position,a=e.className,n=e.children;return r.a.createElement("header",{className:g()("Header",t,a)},n)}function ie(e){var t=e.className,a=e.children;return r.a.createElement("div",{className:g()("HeaderLayout",t)},a)}ce.defaultProps={position:"fixed"},ce.Logo=function(){return r.a.createElement("img",{src:le.a,className:"Header-logo",alt:"MyReads logo"})};a(58);var se=a(37),ue=a.n(se);function me(e){var t=e.loading,a=e.children;return t?r.a.createElement("div",{className:"PageLoader"},r.a.createElement(ue.a,{type:"bars",color:"var(--color-primary)"})):r.a.createElement(r.a.Fragment,null,"function"===typeof a?a():a)}function de(){var e=Object(n.useContext)(Ie),t=e.theme,a=e.setTheme,o="light"===t?"dark":"light";return r.a.createElement(J,{title:"Toggle light/dark theme",icon:"light"!==t?I.h:I.f,onClick:function(){return a(o)}})}a(59),a(60);var fe=function(e){var t=e.header,a=e.renderBody,n=e.floatingActionButton,o=e.loading,l=e.error;return r.a.createElement("div",{className:"Scaffold"},t,r.a.createElement("main",{className:"Scaffold-body"},r.a.createElement(me,{loading:o},l?function(){return function(e){var t;return console.log(e.name,e.message),t="TypeError"===e.name&&e.message.startsWith("NetworkError")?{illustration:r.a.createElement(y.e,{primarycolor:"var(--color-error)"}),title:"Network Error",text:"Error when attempting to fetch data from the server"}:{illustration:r.a.createElement(y.f,{primarycolor:"var(--color-error)"}),title:"Ops! Something went wrong!",text:"Error when attempting to fetch data from the server"},r.a.createElement(re,Object.assign({type:"error"},t))}(l)}:a)),n&&r.a.createElement("div",{className:"Scaffold-fab"},n))};function he(e){var t=e.onTermChipClick;return r.a.createElement("div",{className:"Search-content"},r.a.createElement("div",{className:"SearchHelp"},r.a.createElement("div",{className:"SearchHelp-illustration"},r.a.createElement(y.d,{primarycolor:"var(--color-primary)"})),r.a.createElement("p",{className:"SearchHelp-text"},r.a.createElement("strong",null,"Note:")," the backend API uses a fixed set of cached search results and is limited to the following search terms (including prefixes of them). Any other query will return no results."),r.a.createElement("ul",{className:"SearchHelp-term-list"},x.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("span",{className:"search-term-chip",onClick:function(){return t(e)}},e))})))))}function pe(e){var t=e.value,a=e.placeholder,o=e.autoFocus,l=e.onChange,c=e.onClear,i=Object(n.useState)(o),s=Object(S.a)(i,2),u=s[0],m=s[1],d=Object(n.useRef)(null);return r.a.createElement("div",{className:g()("SearchField",{onFocus:u})},r.a.createElement("div",{className:"SearchField-icon"},r.a.createElement(B.a,{icon:I.g})),r.a.createElement("input",{ref:d,type:"text",autoFocus:o,placeholder:a,value:t,onChange:function(e){return l(e.target.value)},onFocus:function(){return m(!0)},onBlur:function(){return m(!1)}}),r.a.createElement("button",{className:g()("SearchField-clear",{hidden:!t}),onMouseDown:function(e){return e.preventDefault()},onClick:function(e){m(!0),d.current.focus(),c&&c()}},"\xd7"))}function ve(e){return e.trim()}pe.defaultProps={autoFocus:!1};var Ee=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,inputQuery:"",resultsQuery:"",results:[],error:null},e.onInputQueryChange=function(t){e.setState({inputQuery:t}),e.fetchResultsDebounced(t)},e.fetchResults=function(t){var a=ve(t);a!==e.state.resultsQuery?a?(e.setState({loading:!0}),C(a).then((function(t){return e.receiveResults(t,a)})).catch((function(t){return e.setState({loading:!1,error:t})}))):e.setState({results:[],resultsQuery:"",loading:!1}):e.state.loading&&e.setState({loading:!1})},e.receiveResults=function(t,a){if(ve(e.state.inputQuery)!==a)console.log('Ignoring results for outdated query "%s"',a);else if("error"in t)if(t.error.includes("empty query"))e.setState({results:[],resultsQuery:a,loading:!1});else{var n=Error(t.error);console.error(n),e.setState({loading:!1,error:n})}else e.setState({results:t,resultsQuery:a,loading:!1})},e.fetchResultsDebounced=Object(D.debounce)(e.fetchResults,a.DEBOUNCE_TIME),e.setQuery=function(t){e.setState({inputQuery:t}),e.fetchResults(t)},e.onClearInput=function(){console.log("Clear input"),e.onInputQueryChange("")},e}return Object(f.a)(a,[{key:"renderResults",value:function(){var e=this.state,t=e.results,a=e.resultsQuery,n=this.props.booksByID,o=t.map((function(e){return e.id in n?n[e.id]:e}));return 0===t.length?r.a.createElement(re,{illustration:r.a.createElement(y.b,{primarycolor:"var(--color-primary)"}),title:"No books found",text:"Couldn't find any book for \"".concat(a,'"')}):r.a.createElement("div",{className:"Search-content"},r.a.createElement(ne,{books:o,showShelfRibbon:!0}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.inputQuery,n=t.resultsQuery,o=t.loading,l=t.error;return r.a.createElement(fe,{loading:o||this.props.loading,error:l||this.props.error,header:r.a.createElement(ce,{position:"fixed",className:"Search-header"},r.a.createElement(ie,null,r.a.createElement(v.Link,{to:"/"},r.a.createElement(K,null)),r.a.createElement(pe,{placeholder:"Search books...",autoFocus:!0,value:a,onChange:this.onInputQueryChange,onClear:this.onClearInput}),r.a.createElement(de,null))),renderBody:function(){return n?e.renderResults():r.a.createElement(he,{onTermChipClick:e.setQuery})}})}}]),a}(r.a.Component);Ee.DEBOUNCE_TIME=500;var be=Ee,ge=a(39);a(63);function ye(e,t){return e.title<t.title?-1:e.title>t.title?1:e.publishedDate<t.publishedDate?-1:e.publishedDate>t.publishedDate?1:0}var ke=function(e){var t=e.title,a=e.books,n=e.icon,o=e.color,l=Object(U.a)(e,["title","books","icon","color"]);return r.a.createElement("div",Object.assign({className:"Bookshelf"},l),r.a.createElement("h2",{className:"Bookshelf-title"},n&&r.a.createElement(B.a,{icon:n,color:o,className:"Bookshelf-icon"}),t),r.a.createElement("div",{className:"Bookshelf-content"},a.length>0?function(e){var t=e.sort(ye);return r.a.createElement(ne,{books:t})}(a):r.a.createElement("div",{className:"Bookshelf-empty"},r.a.createElement("div",{className:"illustration"},r.a.createElement(y.a,{primarycolor:"var(--color-secondary)"})),r.a.createElement("div",{className:"content"},r.a.createElement("h3",{className:"content-title"},"This shelf is empty"),r.a.createElement("p",{className:"content-text"},"Click the search icon on the top-right of the page to find and add new books!")))))};a(64);function Ne(e){var t=e.children,a=e.className;return r.a.createElement("nav",null,r.a.createElement("ol",{className:g()("Nav",a)},t))}Ne.Item=function(e){var t=e.children,a=e.className,n=Object(U.a)(e,["children","className"]);return r.a.createElement("li",Object.assign({className:g()("NavItem",a)},n),t)};var Oe=Ne;a(65);function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100;window.scrollTo({top:e.offsetTop+t,behavior:"smooth"})}function Ce(){return r.a.createElement(ce,null,r.a.createElement(ie,null,r.a.createElement("div",{className:"Library-logo-wrapper"},r.a.createElement(ce.Logo,null)),r.a.createElement(Oe,{className:"Library-nav"},T.inDisplayOrder.map((function(e){return r.a.createElement(Oe.Item,{key:e.id},r.a.createElement(ge.HashLink,{to:"#".concat(e.slug),scroll:je},e.shortDisplayName))}))),r.a.createElement("div",{className:"Library-action-items"},r.a.createElement(v.Link,{to:"/search"},r.a.createElement(J,{icon:I.g,title:"Search books"})),r.a.createElement(de,null))))}var Se=r.a.memo((function(e){var t=e.booksByID,a=function(e){var t,a=Object.fromEntries(T.ids.map((function(e){return[e,[]]}))),n=Object(A.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a[r.shelf].push(r)}}catch(o){n.e(o)}finally{n.f()}return a}(L(t));return r.a.createElement("div",{className:"Library-content"},T.inDisplayOrder.map((function(e){return r.a.createElement(ke,{id:e.slug,key:e.id,icon:e.icon,color:e.color,title:e.displayName,books:a[e.id]})})))})),De=r.a.memo((function(e){var t=e.booksByID,a=e.loading,n=e.error;return r.a.createElement(fe,{loading:a,error:n,header:r.a.createElement(Ce,null),renderBody:function(){return r.a.createElement(Se,{booksByID:t})}})}));De.defaultProps={loading:!1,error:null};var Be=De,Ie=(a(66),r.a.createContext({theme:"light",setTheme:function(e){return null}})),Re=r.a.createContext({updateBookShelf:function(e,t){return null}}),we=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).setTheme=function(e){localStorage.theme=e,n.themeContext={theme:e,setTheme:n.setTheme},n.setState({theme:e})},n.fetchBooks=function(){return console.log("Fetching books"),n.setState({loading:!0,error:null}),fetch("".concat(N,"/books"),{headers:j}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){n.setState({booksByID:M(e),loading:!1,error:null})})).catch((function(e){n.setState({loading:!1,error:e})}))},n.updateBookShelf=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log('Moving book "%s" to shelf %s',t.title,a),r=n.updateBookShelfLocally(t,a),e.prev=2,e.next=5,l=t.id,c=a,fetch("".concat(N,"/books/").concat(l),{method:"PUT",headers:Object(i.a)(Object(i.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:c})}).then((function(e){return e.json()}));case 5:"error"in(o=e.sent)&&(k.b.error('Your last operation was rejected by the server. Details: "'.concat(o.error,'"')),r()),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),k.b.error('Your last operation did not succeed. Error details: "'.concat(e.t0.message,'"')),r();case 14:case"end":return e.stop()}var l,c}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}(),n.updateBookShelfLocally=function(e,t){var a=n.state.booksByID,r=e.id in a?a[e.id].shelf:R.NONE;return n.setState((function(a){if(r===t)return null;if(t===R.NONE)return{booksByID:F(e.id,a.booksByID)};var n=Object(i.a)(Object(i.a)({},e),{},{shelf:t});return{booksByID:Object(i.a)(Object(i.a)({},a.booksByID),{},Object(c.a)({},e.id,n))}}),(function(){console.log("Optimistic update completed:",{book:e.title,from:r,to:t})})),function(){return n.updateBookShelfLocally(e,r)}},n.state={theme:localStorage.theme||"light",booksByID:{},loading:!1,error:null},n.libraryContext={updateBookShelf:n.updateBookShelf},n.themeContext={theme:n.state.theme,setTheme:n.setTheme},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.fetchBooks()}},{key:"render",value:function(){var e=this.state,t=e.booksByID,a=e.loading,n=e.error,o=e.theme;return r.a.createElement(v.HashRouter,{basename:"/"},r.a.createElement("div",{className:g()("theme",o)},r.a.createElement("div",{className:"App"},r.a.createElement(k.a,null),r.a.createElement(Re.Provider,{value:this.libraryContext},r.a.createElement(Ie.Provider,{value:this.themeContext},r.a.createElement(E.g,null,r.a.createElement(E.d,{exact:!0,path:"/"},r.a.createElement(Be,{booksByID:t,loading:a,error:n})),r.a.createElement(E.d,{exact:!0,path:"/search"},r.a.createElement(be,{booksByID:t,loading:a,error:n})),r.a.createElement(E.d,{path:"*"},r.a.createElement(Te,null))))))))}}]),a}(r.a.Component);function Te(){return r.a.createElement(re,{illustration:r.a.createElement(y.c,{primarycolor:"var(--color-primary)",accentcolor:"#444"}),title:"Page not found",text:"The URL you typed is not valid."})}a(67);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5f77d825.chunk.js.map